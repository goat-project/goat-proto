syntax = "proto3";

package goat_grpc;

import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";
import "google/protobuf/empty.proto";

message ClientIdentification {
    string identifier = 1;
}

message Confirmation {
    bool     confirmed = 1;
    // filled only if confirmed == false, empty string otherwise
    string   msg       = 2;
}

message VmRecord {
}

message IpRecord {
}

message StorageRecord {
}

message AccountingDataChunk {
    repeated VmRecord vms          = 1;
    repeated IpRecord ips          = 2;
    repeated StorageRecord storage = 3;
}

service AccountingService {
    rpc Identify(ClientIdentification) returns (Confirmation);
    rpc Process(AccountingDataChunk) returns (google.protobuf.Empty);
}
